# ─────────────────────────────────────────────────────────────────
#  Decap CMS — config.yml
#  Algo Atelier Website
# ─────────────────────────────────────────────────────────────────
#
#  PRÉ-REQUISITOS no painel Netlify:
#  1. Site Settings → Identity → Enable
#  2. Identity → Registration preferences → Invite only
#  3. Identity → Services → Git Gateway → Enable
#  4. Identity → Invite users → adiciona o teu email
#
# ─────────────────────────────────────────────────────────────────

backend:
  name: git-gateway
  branch: main
  commit_messages:
    create:  'content(cms): criar projeto "{{slug}}"'
    update:  'content(cms): editar projeto "{{slug}}"'
    delete:  'content(cms): apagar projeto "{{slug}}"'
    uploadMedia:  'content(cms): upload de imagem "{{path}}"'
    deleteMedia:  'content(cms): apagar imagem "{{path}}"'

# ─── Media ───────────────────────────────────────────────────────
media_folder:  "assets/img/projetos"
public_folder: "/assets/img/projetos"

# ─── Locale ──────────────────────────────────────────────────────
locale: 'pt'

# ─── Coleções ─────────────────────────────────────────────────────
collections:

  # ── PROJETOS ──────────────────────────────────────────────────
  - name: "projetos"
    label: "Projetos"
    label_singular: "Projeto"
    folder: "content/projetos"
    create: true
    delete: true
    slug: "{{slug}}"
    preview_path: "projetos/{{slug}}"
    summary: "{{title}} — {{location}} ({{year}})"
    sortable_fields: ["title", "year", "featured"]
    view_filters:
      - label: "Destaques"
        field: featured
        pattern: true
    fields:
      # ── Identidade ────────────────────────────────────────────
      - label: "Título (PT)"
        name:  "title"
        widget: string
        hint:  "Nome do projeto em português"

      - label: "Título (EN)"
        name:  "title_en"
        widget: string
        hint:  "Project name in English"

      - label: "Slug (URL)"
        name:  "slug"
        widget: string
        hint:  "Usado no URL: projetos/[slug]/  e  en/projects/[slug_en]/"
        pattern: ['^[a-z0-9-]+$', "Apenas letras minúsculas, números e hifens"]

      - label: "Slug EN (URL)"
        name:  "slug_en"
        widget: string
        hint:  "Versão EN do slug: en/projects/[slug_en]/"
        pattern: ['^[a-z0-9-]+$', "Apenas letras minúsculas, números e hifens"]
        required: false

      # ── Metadados ─────────────────────────────────────────────
      - label: "Localização"
        name:  "location"
        widget: string
        hint:  "Ex: Algarve, Portugal"

      - label: "Área (m²)"
        name:  "area_m2"
        widget: number
        value_type: int
        hint:  "Área total em metros quadrados"

      - label: "Ano"
        name:  "year"
        widget: number
        value_type: int
        min:   2000
        max:   2099
        hint:  "Ano de conclusão"

      - label: "Tipologia"
        name:  "typology"
        widget: select
        options:
          - { label: "Habitação Unifamiliar",  value: "residential" }
          - { label: "Habitação Coletiva",     value: "collective" }
          - { label: "Edifício de Escritórios", value: "office" }
          - { label: "Estrutura Experimental", value: "experimental" }
          - { label: "Equipamento Público",    value: "public" }
          - { label: "Edifício Híbrido",       value: "hybrid" }
          - { label: "Interiores",             value: "interiors" }
        hint:  "Categoria do projeto"

      - label: "Tipologia (EN label)"
        name:  "typology_label_en"
        widget: string
        hint:  "Etiqueta da tipologia em inglês (ex: Hybrid Building)"
        required: false

      - label: "Status"
        name:  "status"
        widget: select
        options:
          - { label: "Concluído",       value: "completed" }
          - { label: "Em Execução",     value: "in_progress" }
          - { label: "Em Projeto",      value: "in_design" }
          - { label: "Em Licenciamento", value: "licensing" }
        default: "completed"

      - label: "Destaque na Homepage"
        name:  "featured"
        widget: boolean
        default: false
        hint:  "Mostra este projeto na secção de projetos da landing page"

      # ── Imagens ───────────────────────────────────────────────
      - label: "Imagem de Capa"
        name:  "cover_image"
        widget: image
        hint:  "Imagem principal do projeto (recomendado: 1600×1000px, WebP)"
        media_library:
          config:
            multiple: false

      - label: "Galeria de Imagens"
        name:  "gallery_images"
        widget: list
        summary: "{{fields.image}}"
        minimize_collapsed: true
        hint:  "Adiciona as imagens da galeria do projeto"
        field:
          label: "Imagem"
          name:  "image"
          widget: image

      - label: "Imagem de Alt (capa)"
        name:  "cover_image_alt"
        widget: string
        hint:  "Texto alternativo da imagem de capa (SEO & acessibilidade)"
        required: false

      # ── Conteúdo ──────────────────────────────────────────────
      - label: "Descrição (PT)"
        name:  "description_pt"
        widget: markdown
        hint:  "Descrição do projeto em português. Suporta parágrafos, negrito, etc."
        buttons: [bold, italic, link, heading-two, heading-three, bulleted-list]
        editor_components: []

      - label: "Descrição (EN)"
        name:  "description_en"
        widget: markdown
        hint:  "Project description in English."
        buttons: [bold, italic, link, heading-two, heading-three, bulleted-list]
        editor_components: []
        required: false

      # ── SEO ───────────────────────────────────────────────────
      - label: "Meta Description (PT)"
        name:  "meta_description_pt"
        widget: string
        hint:  "Descrição para motores de busca — máx. 160 caracteres"
        pattern: ['^.{0,160}$', "Máximo 160 caracteres"]
        required: false

      - label: "Meta Description (EN)"
        name:  "meta_description_en"
        widget: string
        hint:  "SEO description in English — max 160 characters"
        pattern: ['^.{0,160}$', "Max 160 characters"]
        required: false

  # ── CONFIGURAÇÕES GLOBAIS ──────────────────────────────────────
  - name: "settings"
    label: "Configurações do Site"
    delete: false
    files:
      - label: "Configurações Gerais"
        name:  "general"
        file:  "content/settings/general.yml"
        fields:
          - label: "Favicon do Site"
            name:  "site_favicon"
            widget: image
            default: "/assets/img/fav-icon.svg"
            hint: "Upload do ícone que aparece no separador do browser (SVG recomendado)"
          - label: "Email de Contacto"
            name:  "contact_email"
            widget: string
          - label: "Telefone"
            name:  "phone"
            widget: string
          - label: "Morada"
            name:  "address"
            widget: text
          - label: "Instagram URL"
            name:  "instagram_url"
            widget: string
            required: false
          - label: "LinkedIn URL"
            name:  "linkedin_url"
            widget: string
            required: false
          - label: "Facebook URL"
            name:  "facebook_url"
            widget: string
            required: false
            placeholder: "https://facebook.com"
