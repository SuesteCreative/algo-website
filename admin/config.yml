# ─────────────────────────────────────────────────────────────────
#  Decap CMS — config.yml
#  Algo Atelier Website
# ─────────────────────────────────────────────────────────────────

backend:
  name: git-gateway
  branch: main
  commit_messages:
    create:  'content(cms): criar projeto "{{slug}}"'
    update:  'content(cms): editar projeto "{{slug}}"'
    delete:  'content(cms): apagar projeto "{{slug}}"'
    uploadMedia:  'content(cms): upload de imagem "{{path}}"'
    deleteMedia:  'content(cms): apagar imagem "{{path}}"'

media_folder:  "assets/img/projetos"
public_folder: "/assets/img/projetos"
locale: 'pt'

collections:

  # ── LANDING PAGE ──────────────────────────────────────────────
  - name: "landing"
    label: "🏠 Landing Page"
    label_singular: "Configuração"
    delete: false
    files:

      - label: "Conteúdo Geral (Hero + Intro)"
        name: "landing_general"
        file: "content/settings/general.yml"
        fields:
          - label: "SEO da Página Principal"
            name: "homepage_seo"
            widget: object
            fields:
              - { label: "Título da Página (PT)", name: "meta_title_pt", widget: string }
              - { label: "Descrição (PT)", name: "meta_desc_pt", widget: text }
              - { label: "Título da Página (EN)", name: "meta_title_en", widget: string }
              - { label: "Descrição (EN)", name: "meta_desc_en", widget: text }

          - label: "Texto Introdutório (abaixo da Hero)"
            name: "intro"
            widget: object
            fields:
              - { label: "Parágrafo PT", name: "intro_tagline_pt", widget: text, required: false }
              - { label: "Parágrafo EN", name: "intro_tagline_en", widget: text, required: false }

          - label: "Vídeo — Ideia à Realidade"
            name: "process_video"
            widget: object
            hint: "Selecione apenas uma opção. O ficheiro tem prioridade sobre os outros campos."
            fields:
              - { label: "Ficheiro de Vídeo (recomendado)", name: "file", widget: file, required: false, media_folder: "/assets/img", public_folder: "/assets/img", hint: "Formato: .mp4 (H.264). Tamanho ideal: < 5MB para performance." }
              - { label: "Link Externo (URL direto .mp4)", name: "external_url", widget: string, required: false, hint: "URL direto para um ficheiro .mp4 em servidor externo." }
              - { label: "ID do YouTube", name: "youtube_id", widget: string, required: false, hint: "Apenas o ID, ex: dQw4w9WgXcQ" }

      - label: "Testemunhos"
        name: "testimonials_settings"
        file: "content/settings/testimonials.yml"
        fields:
          - label: "Lista de Testemunhos"
            name: "items"
            widget: list
            summary: "{{fields.name}} — {{fields.rating}}★"
            fields:
              - { label: "Nome do Cliente", name: "name", widget: string }
              - { label: "Classificação (1-5 estrelas)", name: "rating", widget: number, min: 1, max: 5, default: 5 }
              - { label: "Texto do Testemunho", name: "text", widget: text }

  # ── PROJETOS ──────────────────────────────────────────────────
  - name: "projetos"
    label: "📐 Projetos"
    label_singular: "Projeto"
    folder: "content/projetos"
    create: true
    delete: true
    slug: "{{slug}}"
    summary: "{{title}} — {{location}} ({{year}})"
    sortable_fields: [title, year, featured]
    fields:
      - { label: "Título (PT)", name: "title", widget: string, hint: "Nome do projeto em português" }
      - { label: "Título (EN)", name: "title_en", widget: string, hint: "Project name in English" }
      - label: "Identificador (URL)"
        name: "slug"
        widget: string
        hint: "Usado nos links: projetos/[identificador]/"
        pattern: ['^[a-z0-9-]+$', "Apenas letras minúsculas e hifens"]
      - label: "Identificador EN (URL)"
        name: "slug_en"
        widget: string
        hint: "EN version: en/projects/[identificador]/"
        required: false
      - { label: "Localização", name: "location", widget: string, hint: "Ex: Algarve, Portugal" }
      - { label: "Área (m²)", name: "area_m2", widget: number, value_type: int }
      - { label: "Ano", name: "year", widget: number, value_type: int, min: 2000 }
      - label: "Tipologia"
        name: "typology"
        widget: select
        options:
          - { label: "Habitação Unifamiliar",  value: "residential" }
          - { label: "Habitação Coletiva",     value: "collective" }
          - { label: "Edifício de Escritórios", value: "office" }
          - { label: "Estrutura Experimental", value: "experimental" }
          - { label: "Equipamento Público",    value: "public" }
          - { label: "Edifício Híbrido",       value: "hybrid" }
          - { label: "Interiores",             value: "interiors" }
      - { label: "Destaque na Homepage", name: "featured", widget: boolean, default: false }
      - { label: "Imagem de Capa", name: "cover_image", widget: image, hint: "Formato: .webp ou .jpg. Tamanho ideal: 1920x1080px (Proporção 16:9)." }
      - label: "Galeria de Imagens"
        name: "gallery_images"
        widget: list
        field: { label: "Imagem", name: "image", widget: image, hint: "Formato: .webp ou .jpg. Tamanho ideal: Max 2000px de largura." }
      - label: "Descrição (PT)"
        name: "description_pt"
        widget: markdown
        buttons: [bold, italic, link, heading-two, bulleted-list]
        editor_components: []
      - label: "Descrição (EN)"
        name: "description_en"
        widget: markdown
        required: false
        buttons: [bold, italic, link, heading-two, bulleted-list]
        editor_components: []

  # ── PÁGINA SOBRE ──────────────────────────────────────────────
  - name: "pagina_sobre"
    label: "👤 Página Sobre"
    delete: false
    files:
      - label: "Conteúdo da Página Sobre"
        name: "about"
        file: "content/settings/about.yml"
        fields:
          - label: "Conteúdo PT"
            name: "pt"
            widget: object
            collapsed: false
            fields:
              - label: "Introdução"
                name: "intro"
                widget: object
                fields:
                  - { label: "Título", name: "title", widget: string }
                  - { label: "Texto", name: "text", widget: markdown, buttons: [bold, italic, link], editor_components: [] }
              - label: "Visão e Filosofia"
                name: "philosophy"
                widget: object
                fields:
                  - { label: "Título", name: "title", widget: string }
                  - { label: "Texto", name: "text", widget: markdown, buttons: [bold, italic, link], editor_components: [] }
              - label: "Percurso e Fundação"
                name: "foundation"
                widget: object
                fields:
                  - { label: "Título", name: "title", widget: string }
                  - { label: "Texto", name: "text", widget: markdown, buttons: [bold, italic, link], editor_components: [] }
              - label: "Equipa"
                name: "team"
                widget: object
                fields:
                  - { label: "Título", name: "title", widget: string }
                  - { label: "Texto", name: "text", widget: markdown, buttons: [bold, italic, link], editor_components: [] }

          - label: "Conteúdo EN"
            name: "en"
            widget: object
            collapsed: true
            fields:
              - label: "Introduction"
                name: "intro"
                widget: object
                fields:
                  - { label: "Title", name: "title", widget: string }
                  - { label: "Text", name: "text", widget: markdown, buttons: [bold, italic, link], editor_components: [] }
              - label: "Vision and Philosophy"
                name: "philosophy"
                widget: object
                fields:
                  - { label: "Title", name: "title", widget: string }
                  - { label: "Text", name: "text", widget: markdown, buttons: [bold, italic, link], editor_components: [] }
              - label: "Background and Foundation"
                name: "foundation"
                widget: object
                fields:
                  - { label: "Title", name: "title", widget: string }
                  - { label: "Text", name: "text", widget: markdown, buttons: [bold, italic, link], editor_components: [] }
              - label: "Team"
                name: "team"
                widget: object
                fields:
                  - { label: "Title", name: "title", widget: string }
                  - { label: "Text", name: "text", widget: markdown, buttons: [bold, italic, link], editor_components: [] }

          - label: "Imagens — Sobre"
            name: "images"
            widget: object
            collapsed: false
            fields:
              - { label: "Imagem 1", name: "image_1", widget: image, required: false }
              - { label: "Texto Alt (Imagem 1)", name: "image_1_alt", widget: string, required: false }
              - { label: "Imagem 2", name: "image_2", widget: image, required: false }
              - { label: "Texto Alt (Imagem 2)", name: "image_2_alt", widget: string, required: false }

  # ── PÁGINA SERVIÇOS ───────────────────────────────────────────
  - name: "pagina_servicos"
    label: "🛠️ Página Serviços"
    delete: false
    files:
      - label: "Conteúdo da Página Serviços"
        name: "services_page"
        file: "content/settings/services.yml"
        fields:
          - label: "Títulos de Cabeçalho"
            name: "header_titles"
            widget: object
            collapsed: false
            fields:
              - { label: "Título Principal (PT)", name: "title_pt", widget: string }
              - { label: "Título Principal (EN)", name: "title_en", widget: string }
          - label: "Lista de Serviços"
            name: "items"
            widget: list
            summary: "{{fields.title_pt}}"
            fields:
              - { label: "Título (PT)", name: "title_pt", widget: string }
              - { label: "Título (EN)", name: "title_en", widget: string }
              - { label: "Texto (PT)", name: "text_pt", widget: text }
              - { label: "Texto (EN)", name: "text_en", widget: text }
              - { label: "Imagem (Opcional)", name: "image", widget: image, required: false, hint: "Imagem quadrada ou editorial que acompanha o card." }

  # ── PÁGINA CONTACTO ───────────────────────────────────────────
  - name: "pagina_contacto"
    label: "📍 Página Contacto"
    delete: false
    files:
      - label: "Informações de Contacto & Mapa"
        name: "contacto_settings"
        file: "content/settings/general.yml"
        fields:
          - label: "Contactos"
            name: "contacts"
            widget: object
            collapsed: false
            fields:
              - { label: "Email", name: "contact_email", widget: string }
              - { label: "Telefone", name: "phone", widget: string }
              - { label: "Morada", name: "address", widget: text }

          - label: "Localização (Mapa Google Maps)"
            name: "map"
            widget: object
            fields:
              - { label: "Código iframe do Google Maps", name: "iframe", widget: text, hint: "Vá a Google Maps → Partilhar → Incorporar um mapa → Copie o código HTML completo aqui" }

  # ── CONFIGURAÇÕES GLOBAIS ──────────────────────────────────────
  - name: "settings"
    label: "⚙️ Configurações Globais"
    delete: false
    files:
      - label: "Identidade Visual & Rastreio"
        name: "global_settings"
        file: "content/settings/general.yml"
        fields:
          - label: "Identidade Visual"
            name: "identity"
            widget: object
            collapsed: false
            fields:
              - { label: "Favicon do Site", name: "site_favicon", widget: image, default: "/assets/img/fav-icon.svg" }
              - { label: "Placeholder para Projetos", name: "project_placeholder", widget: image, required: false, hint: "Imagem usada quando um projeto não tem imagem de capa configurada." }
              - { label: "Email Destinatário Formulários", name: "contact_recipient", widget: string, hint: "Email onde recebe os pedidos." }
              - { label: "CC Email (Opcional)", name: "contact_cc", widget: string, required: false }
              - { label: "Manifesto: Citação (PT)", name: "manifesto_quote_pt", widget: text, default: "A arquitetura é o jogo sábio, correto e magnífico dos volumes sob a luz." }
              - { label: "Manifesto: Citação (EN)", name: "manifesto_quote_en", widget: text, default: "Architecture is the learned game, correct and magnificent, of forms assembled in the light." }
              - { label: "Manifesto: Autor", name: "manifesto_author", widget: string, default: "Le Corbusier" }
              - { label: "Manifesto: Imagem", name: "manifesto_image", widget: image, required: false, hint: "Opcional. Formato: .webp ou .png (transparente recomendado).", default: "/assets/img/logo-scribbled-transparent.webp" }

          - label: "Redes Sociais"
            name: "social"
            widget: object
            fields:
              - { label: "Instagram URL", name: "instagram_url", widget: string, required: false }
              - { label: "LinkedIn URL", name: "linkedin_url", widget: string, required: false }
              - { label: "Facebook URL", name: "facebook_url", widget: string, required: false }

          - label: "Analytics & Publicidade (Tracking)"
            name: "tracking"
            widget: object
            hint: "Rastreio ativado após consentimento no site. Use apenas os IDs."
            fields:
              - label: "Google Analytics Measurement ID"
                name: "ga_id"
                widget: string
                required: false
                hint: "Ex: G-XXXXXXXXXX"
                pattern: ['^(G-[A-Z0-9]+)?$', "Formato inválido (G-...)"]
              - label: "Google Ads Conversion ID"
                name: "ads_id"
                widget: string
                required: false
                hint: "Ex: AW-XXXXXXXXXX"
                pattern: ['^(AW-[0-9]+)?$', "Formato inválido (AW-...)"]
              - label: "Google Merchant ID"
                name: "google_merchant"
                widget: string
                required: false
                hint: "Opcional. Introduza o ID de verificação do Merchant Center."