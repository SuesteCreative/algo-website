# ─────────────────────────────────────────────────────────────────
#  Decap CMS — config.yml
#  Algo Atelier Website
# ─────────────────────────────────────────────────────────────────

backend:
  name: git-gateway
  branch: main
  commit_messages:
    create:  'content(cms): criar projeto "{{slug}}"'
    update:  'content(cms): editar projeto "{{slug}}"'
    delete:  'content(cms): apagar projeto "{{slug}}"'
    uploadMedia:  'content(cms): upload de imagem "{{path}}"'
    deleteMedia:  'content(cms): apagar imagem "{{path}}"'

media_folder:  "assets/img/projetos"
public_folder: "/assets/img/projetos"
locale: 'pt'

collections:

  # ── PROJETOS ──────────────────────────────────────────────────
  - name: "projetos"
    label: "Projetos"
    label_singular: "Projeto"
    folder: "content/projetos"
    create: true
    delete: true
    slug: "{{slug}}"
    summary: "{{title}} — {{location}} ({{year}})"
    sortable_fields: ["title", "year", "featured"]
    fields:
      - { label: "Título (PT)", name: "title", widget: string, hint: "Nome do projeto em português" }
      - { label: "Título (EN)", name: "title_en", widget: string, hint: "Project name in English" }
      - label: "Identificador (URL)"
        name: "slug"
        widget: string
        hint: "Usado nos links: projetos/[identificador]/"
        pattern: ['^[a-z0-9-]+$', "Apenas letras minúsculas e hifens"]
      - label: "Identificador EN (URL)"
        name: "slug_en"
        widget: string
        hint: "EN version: en/projects/[identificador]/"
        required: false
      - { label: "Localização", name: "location", widget: string, hint: "Ex: Algarve, Portugal" }
      - { label: "Área (m²)", name: "area_m2", widget: number, value_type: int }
      - { label: "Ano", name: "year", widget: number, value_type: int, min: 2000 }
      - label: "Tipologia"
        name: "typology"
        widget: select
        options:
          - { label: "Habitação Unifamiliar",  value: "residential" }
          - { label: "Habitação Coletiva",     value: "collective" }
          - { label: "Edifício de Escritórios", value: "office" }
          - { label: "Estrutura Experimental", value: "experimental" }
          - { label: "Equipamento Público",    value: "public" }
          - { label: "Edifício Híbrido",       value: "hybrid" }
          - { label: "Interiores",             value: "interiors" }
      - { label: "Destaque na Homepage", name: "featured", widget: boolean, default: false }
      - { label: "Imagem de Capa", name: "cover_image", widget: image }
      - label: "Galeria de Imagens"
        name: "gallery_images"
        widget: list
        field: { label: "Imagem", name: "image", widget: image }
      - label: "Descrição (PT)"
        name: "description_pt"
        widget: markdown
        buttons: [bold, italic, link, heading-two, bulleted-list]
        editor_components: []
      - label: "Descrição (EN)"
        name: "description_en"
        widget: markdown
        required: false
        buttons: [bold, italic, link, heading-two, bulleted-list]
        editor_components: []

  # ── PÁGINAS FIXAS ──────────────────────────────────────────────
  - name: "pages"
    label: "Páginas"
    delete: false
    files:
      - label: "Página Sobre"
        name: "about"
        file: "content/settings/about.yml"
        fields:
          - label: "Conteúdo PT"
            name: "pt"
            widget: object
            fields:
              - { label: "Texto Principal", name: "main_text", widget: markdown, buttons: [bold, italic, link], editor_components: [] }
          - label: "Conteúdo EN"
            name: "en"
            widget: object
            fields:
              - { label: "Main Text", name: "main_text", widget: markdown, buttons: [bold, italic, link], editor_components: [] }
          - label: "Imagens"
            name: "images"
            widget: object
            fields:
              - { label: "Imagem 1 (Início)", name: "image_1", widget: image, required: false }
              - { label: "Imagem 2 (Fim)", name: "image_2", widget: image, required: false }

  # ── CONFIGURAÇÕES GLOBAIS ──────────────────────────────────────
  - name: "settings"
    label: "Configurações"
    delete: false
    files:
      - label: "Gerais & SEO"
        name: "general"
        file: "content/settings/general.yml"
        fields:
          - label: "Identidade Visual"
            name: "identity"
            widget: object
            fields:
              - { label: "Favicon do Site", name: "site_favicon", widget: image, default: "/assets/img/fav-icon.svg" }
          
          - label: "Homepage SEO"
            name: "homepage_seo"
            widget: object
            fields:
              - { label: "Meta Title (PT)", name: "meta_title_pt", widget: string }
              - { label: "Meta Description (PT)", name: "meta_desc_pt", widget: text }
              - { label: "Meta Title (EN)", name: "meta_title_en", widget: string }
              - { label: "Meta Description (EN)", name: "meta_desc_en", widget: text }
          
          - label: "Texto Introdutório (abaixo da Hero)"
            name: "intro"
            widget: object
            fields:
              - { label: "Parágrafo PT", name: "intro_tagline_pt", widget: text, required: false }
              - { label: "Parágrafo EN", name: "intro_tagline_en", widget: text, required: false }

          - label: "Contactos"
            name: "contacts"
            widget: object
            fields:
              - { label: "Email", name: "contact_email", widget: string }
              - { label: "Telefone", name: "phone", widget: string }
              - { label: "Morada", name: "address", widget: text }
          
          - label: "Redes Sociais"
            name: "social"
            widget: object
            fields:
              - { label: "Instagram URL", name: "instagram_url", widget: string, required: false }
              - { label: "LinkedIn URL", name: "linkedin_url", widget: string, required: false }
              - { label: "Facebook URL", name: "facebook_url", widget: string, required: false, placeholder: "https://facebook.com" }
